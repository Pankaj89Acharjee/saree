{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{listOrderMine}from'../actions/orderActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderHistoryScreen(props){/*Getting error, loading and orders from REDUX store i.e., from orderMineListReducer in orderReduer*/var orderMineList=useSelector(function(state){return state.orderMineList;});var loading=orderMineList.loading,error=orderMineList.error,orders=orderMineList.orders;var dispatch=useDispatch();useEffect(function(){if(!orders){/*Calling fx listOrderMine from Actions ==>> orderActions*/dispatch(listOrderMine());}},[orders,dispatch]);/*orderMineList is in store.js*/return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Order History\"}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ORDER ID NO\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID/NOT PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED/HOLDING\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(orders){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:orders._id}),/*#__PURE__*/_jsx(\"td\",{children:orders.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs.\",orders.totalPrice.toFixed(2),\"/-\"]}),/*#__PURE__*/_jsx(\"td\",{children:orders.isPaid?orders.paidAt.substring(0,10):'Not Paid'}),/*#__PURE__*/_jsx(\"td\",{children:orders.isDelivered?orders.deliveredAt.substring(0,10):'Not Delivered'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(){props.history.push(\"/order/\".concat(orders._id));},children:\"Order Details\"})})]},orders._id);})})]})]});}","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/screens/OrderHistoryScreen.js"],"names":["React","useEffect","useDispatch","useSelector","listOrderMine","LoadingBox","MessageBox","OrderHistoryScreen","props","orderMineList","state","loading","error","orders","dispatch","map","_id","createdAt","substring","totalPrice","toFixed","isPaid","paidAt","isDelivered","deliveredAt","history","push"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAwC,aAAxC,CACA,OAASC,aAAT,KAA8B,yBAA9B,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,wFAIA,cAAe,SAASC,CAAAA,kBAAT,CAA4BC,KAA5B,CAAmC,CAC9C,qGACA,GAAMC,CAAAA,aAAa,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACD,aAAV,EAAN,CAAjC,CACA,GAAQE,CAAAA,OAAR,CAAkCF,aAAlC,CAAQE,OAAR,CAAiBC,KAAjB,CAAkCH,aAAlC,CAAiBG,KAAjB,CAAwBC,MAAxB,CAAkCJ,aAAlC,CAAwBI,MAAxB,CAEA,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACZ,GAAG,CAACY,MAAJ,CAAY,CAGZ,2DACAC,QAAQ,CAACV,aAAa,EAAd,CAAR,CACH,CAAC,CANO,CAML,CAACS,MAAD,CAASC,QAAT,CANK,CAAT,CAOA,gCACA,mBACI,aAAK,SAAS,CAAG,WAAjB,wBACI,qCADJ,CAEKH,OAAO,cAAK,KAAC,UAAD,IAAL,CACFC,KAAK,cAAG,KAAC,UAAD,EAAY,OAAO,CAAG,QAAtB,UAAgCA,KAAhC,EAAH,cAEN,eAAO,SAAS,CAAC,OAAjB,wBACI,oCACA,mCACG,mCADH,cAEG,4BAFH,cAGG,6BAHH,cAIG,qCAJH,cAKG,yCALH,cAMG,+BANH,GADA,EADJ,cAWI,uBACKC,MAAM,CAACE,GAAP,CAAW,SAACF,MAAD,qBACR,mCACA,oBAAKA,MAAM,CAACG,GAAZ,EADA,cAEA,oBAAKH,MAAM,CAACI,SAAP,CAAiBC,SAAjB,CAA2B,CAA3B,CAA8B,EAA9B,CAAL,EAFA,cAGA,4BAAQL,MAAM,CAACM,UAAP,CAAkBC,OAAlB,CAA0B,CAA1B,CAAR,QAHA,cAIA,oBAMSP,MAAM,CAACQ,MAAP,CAAgBR,MAAM,CAACS,MAAP,CAAcJ,SAAd,CAAwB,CAAxB,CAA2B,EAA3B,CAAhB,CAAiD,UAN1D,EAJA,cAaA,oBAAKL,MAAM,CAACU,WAAP,CAAqBV,MAAM,CAACW,WAAP,CAAmBN,SAAnB,CAA6B,CAA7B,CAAgC,EAAhC,CAArB,CAA2D,eAAhE,EAbA,cAcA,iCACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CACA,OAAO,CAAE,kBAAM,CACXV,KAAK,CAACiB,OAAN,CAAcC,IAAd,kBAA6Bb,MAAM,CAACG,GAApC,GACH,CAHD,2BADJ,EAdA,GAASH,MAAM,CAACG,GAAhB,CADQ,EAAX,CADL,EAXJ,GALT,GADJ,CAuDH","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector} from 'react-redux';\r\nimport { listOrderMine } from '../actions/orderActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\n\r\n\r\nexport default function OrderHistoryScreen(props) {\r\n    /*Getting error, loading and orders from REDUX store i.e., from orderMineListReducer in orderReduer*/\r\n    const orderMineList = useSelector(state => state.orderMineList);\r\n    const { loading, error, orders} = orderMineList;\r\n   \r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if(!orders) {\r\n\r\n    \r\n        /*Calling fx listOrderMine from Actions ==>> orderActions*/\r\n        dispatch(listOrderMine());\r\n    }}, [orders, dispatch]);\r\n    /*orderMineList is in store.js*/\r\n    return (\r\n        <div className = \"container\">\r\n            <h1 /*We need to check 'loading' first*/>Order History</h1>\r\n            {loading ? ( <LoadingBox></LoadingBox> \r\n             ): ( error ? <MessageBox variant = \"danger\">{error}</MessageBox>\r\n             : (\r\n                 <table className=\"table\">\r\n                     <thead>\r\n                     <tr>\r\n                        <th>ORDER ID NO</th>\r\n                        <th>DATE</th>\r\n                        <th>TOTAL</th>\r\n                        <th>PAID/NOT PAID</th>\r\n                        <th>DELIVERED/HOLDING</th>\r\n                        <th>ACTIONS</th>\r\n                     </tr>\r\n                     </thead>\r\n                     <tbody /*Now looking over orders and using map fx to convert each orderobject into JSX*/>\r\n                         {orders.map((orders) => (\r\n                             <tr key={orders._id}>\r\n                             <td>{orders._id}</td>\r\n                             <td>{orders.createdAt.substring(0, 10)}</td>\r\n                             <td>Rs.{orders.totalPrice.toFixed(2)}/-</td>\r\n                             <td /*isPaid is conditional. If it is true (\r\n                                 ?) then show order.paidAt for showing \r\n                                 only date part and not time. Substring is used to capture only \r\n                                 date and not the time of the payment. If this condition is\r\n                                 false, then it will show not payment not paid \r\n                                 */>\r\n                                     {orders.isPaid ? orders.paidAt.substring(0, 10) : 'Not Paid'}         \r\n                            </td>\r\n                             \r\n                             <td>{orders.isDelivered ? orders.deliveredAt.substring(0, 10) : 'Not Delivered'}</td>\r\n                             <td>\r\n                                 <button type=\"button\" className=\"btn btn-primary\"\r\n                                 onClick={() => {\r\n                                     props.history.push(`/order/${orders._id}`);\r\n                                 }}>Order Details</button>\r\n                             </td>\r\n                             \r\n                         </tr>\r\n                         )\r\n                            \r\n                         )}\r\n                     </tbody>\r\n                 </table>\r\n\r\n             )\r\n             )\r\n            }\r\n\r\n        </div>\r\n    )\r\n        \r\n    \r\n}"]},"metadata":{},"sourceType":"module"}