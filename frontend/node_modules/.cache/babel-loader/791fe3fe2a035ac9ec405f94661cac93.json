{"ast":null,"code":"import _toConsumableArray from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useParams}from\"react-router-dom\";import{createProduct,deleteProduct,listProducts}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductListScreen(props){var _useParams=useParams(),_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;/*For specifying for SELLER*/var sellerMode=props.match.path.indexOf('/seller')>=0;var productList=useSelector(function(state){return state.productList;});/*Importing from rext Redux*/ /*We also created productList() object in the HomeScreen.js*/ /*Using it*/var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;/*Importing productCreate from Store.js and thus importing reducers*/var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;/*Importing from store.js for deletion*/var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});/*Because a blank page needs \r\n           to be shown after successful creation of product*/props.history.push(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:'',pageNumber:pageNumber/*If SellerMode is true, then show filtered products of that seller*/}));/*Imported from Actions/productActions*/},[createdProduct,dispatch,props.history,successCreate,successDelete,sellerMode,userInfo._id,pageNumber]);var deleteHandler=function deleteHandler(product){if(window.confirm('Are you sure to delete the product?')){dispatch(deleteProduct(product._id));/*deleteProduct is a fx and need to be implemented in the productAction.js*/}};var createHandler=function createHandler(){dispatch(createProduct());/*Thi is a new action, it is to be \r\n        implemented in the actions folder named as createProduct()*/};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Product List\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler,children:\"Create New Product\"})]}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/product/\".concat(product._id,\"/edit\"));},children:\"EDIT\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);},children:\"DELETE\"})]})]},product._id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row1 center pagination\"/*For showing page numbers in the below*/,children:_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/_jsxs(Link,{to:\"/productlist/pageNumber/\".concat(x+1),children:[\"P\",x+1]},x+1/*For showing page number*/);})})]})]});}","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","ProductListScreen","props","pageNumber","sellerMode","match","path","indexOf","productList","state","loading","error","products","page","pages","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","history","push","_id","seller","deleteHandler","window","confirm","createHandler","map","name","price","category","brand","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { createProduct, deleteProduct, listProducts } from \"../actions/productActions\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { PRODUCT_CREATE_RESET, PRODUCT_DELETE_RESET } from \"../constants/productConstants\";\r\n\r\nexport default function ProductListScreen(props) {\r\n\r\n    const { pageNumber = 1} = useParams();\r\n    /*For specifying for SELLER*/\r\n    const sellerMode = props.match.path.indexOf('/seller') >=0; \r\n    const productList = useSelector((state) => state.productList); /*Importing from rext Redux*/\r\n    /*We also created productList() object in the HomeScreen.js*/\r\n    /*Using it*/\r\n    const { loading, error, products, page, pages} = productList;\r\n\r\n\r\n\r\n    /*Importing productCreate from Store.js and thus importing reducers*/\r\n    const productCreate = useSelector(state => state.productCreate);\r\n    const { loading: loadingCreate, \r\n        error: errorCreate, \r\n        success: successCreate, \r\n        product: createdProduct} = productCreate;\r\n\r\n    \r\n        /*Importing from store.js for deletion*/\r\n    const productDelete = useSelector(state => state.productDelete); \r\n    const { loading: loadingDelete, error: errorDelete, success: successDelete} = productDelete;\r\n\r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const {userInfo} = userSignin;\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n       if(successCreate) {\r\n           dispatch({type: PRODUCT_CREATE_RESET}); /*Because a blank page needs \r\n           to be shown after successful creation of product*/\r\n           props.history.push(`/product/${createdProduct._id}/edit`);\r\n       }\r\n       if(successDelete) {\r\n           dispatch({ type: PRODUCT_DELETE_RESET});\r\n       }\r\n        dispatch(listProducts({seller: sellerMode ? userInfo._id : '', pageNumber /*If SellerMode is true, then show filtered products of that seller*/\r\n        })\r\n        ); /*Imported from Actions/productActions*/\r\n    }, [ createdProduct, \r\n        dispatch, \r\n        props.history, \r\n        successCreate, \r\n        successDelete, \r\n        sellerMode, \r\n        userInfo._id,\r\n        pageNumber\r\n        ]);\r\n \r\n\r\n\r\n    \r\n    \r\n    const deleteHandler = (product) => {\r\n        if(window.confirm('Are you sure to delete the product?')) {\r\n            dispatch(deleteProduct(product._id)); /*deleteProduct is a fx and need to be implemented in the productAction.js*/\r\n        }\r\n    };\r\n\r\n    const createHandler = () => {\r\n        \r\n            dispatch(createProduct()); /*Thi is a new action, it is to be \r\n        implemented in the actions folder named as createProduct()*/  \r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n            <h1> Product List</h1>\r\n            <button type=\"button\" className=\"primary\" onClick={createHandler}>\r\n                Create New Product\r\n            </button>\r\n            </div>\r\n            {loadingDelete && <LoadingBox></LoadingBox> }\r\n            {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\r\n\r\n            {loadingCreate && <LoadingBox></LoadingBox> }\r\n            {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\r\n            {\r\n                loading ? (<LoadingBox></LoadingBox>)\r\n                : error ? (<MessageBox variant = \"danger\">{error}</MessageBox>\r\n                ) : (\r\n                    \r\n               <>\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>NAME</th>\r\n                            <th>PRICE</th>\r\n                            <th>CATEGORY</th>\r\n                            <th>BRAND</th>\r\n                            <th>ACTIONS</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {products.map((product) => (\r\n\r\n                       \r\n                            <tr key = {product._id}>\r\n                                <td>{product._id}</td>\r\n                                <td>{product.name}</td>\r\n                                <td>{product.price}</td>\r\n                                <td>{product.category}</td>\r\n                                <td>{product.brand}</td>\r\n                                <td>\r\n                                    <button \r\n                                    type=\"button\"\r\n                                    className = \"small\"\r\n                                    onClick = {() =>\r\n                                    props.history.push(`/product/${product._id}/edit`)}>\r\n                                        EDIT\r\n                                    </button>\r\n                                \r\n                                    <button \r\n                                    type=\"button\"\r\n                                    className = \"small\"\r\n                                    onClick = {() => deleteHandler(product)}\r\n                                    >\r\n                                        DELETE\r\n                                    </button>\r\n\r\n                                </td>\r\n                            </tr>\r\n                        )\r\n                        )\r\n                        }\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div className=\"row1 center pagination\" /*For showing page numbers in the below*/>\r\n                {\r\n                    [...Array(pages).keys()].map((x) => (\r\n\r\n    \r\n                        <Link key={x + 1 /*For showing page number*/} \r\n                        to = {`/productlist/pageNumber/${x + 1}`}>\r\n                        P{x + 1}</Link>\r\n                    ))\r\n                } \r\n                </div>\r\n                </>\r\n             )}\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}