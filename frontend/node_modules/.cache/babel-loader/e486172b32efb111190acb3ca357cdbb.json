{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\Programming\\\\Saree\\\\frontend\\\\src\\\\screens\\\\OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport Axios from \"axios\";\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { detailsOrder, payOrder } from \"../actions/orderActions\";\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { ORDER_PAY_RESET } from \"../constants/orderConstants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function OrderScreen(props) {\n  _s();\n\n  const orderId = props.match.params.id;\n  /*MAtching orderId and storing in orderId const*/\n\n  /*Getting status of PAYPAL SDK by REACT hooks*/\n\n  const [sdkReady, setSdkReady] = useState(false);\n  /*Getting OrderPay from REDUX*/\n\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    error: errorPay,\n    success: successPay\n  } = orderPay;\n  /* Now fetching orderDetails from REDUX store*/\n\n  const orderDetails = useSelector(state => state.orderDetails);\n  /*orderDetails contains order loading and error from REDUX store*/\n\n  const {\n    order,\n    loading,\n    error\n  } = orderDetails;\n  /*Importing userInfo from redux*/\n\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const dispatch = useDispatch();\n  /*Using const orderId = props.match.params.id;*/\n\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      /*It's backend request to get the client ID*/\n      const {\n        data\n      } = await Axios.get('/api/config/paypal');\n      const script = document.createElement('script');\n      script.type = \"text/javascript\";\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay || order && order._id !== orderId)\n      /*If Order Id is not loaded, \r\n      then load it, OR if successPay is true then refresh the page OR \r\n      order_id and OrderId does not match means, if the ID is not matched \r\n      with the URL id and customer order Id, then refresh the page and \r\n      to generate a new order id*/\n      {\n        dispatch({\n          type: ORDER_PAY_RESET\n        });\n        dispatch(detailsOrder(orderId));\n        /*OrderId comes from URL, so we need to define and import it*/\n      } else {\n      if (!order.isPaid) {\n        if (!window.paypal) {\n          addPayPalScript();\n          /*If paypal window is not loaded, it loads it*/\n        } else {\n          setSdkReady(true);\n        }\n      }\n    }\n  }, [dispatch, order, orderId, sdkReady]);\n  /*---Defining SuccessPaymentHandler----*/\n\n  const successPaymentHandler = paymentResult => {\n    dispatch(payOrder(order, paymentResult));\n    /*paymentResult is the result in the paypal*/\n  };\n  /*For DeliverHandler fx*/\n\n\n  const deliverHandler = () => {\n    dispatch(deliverOrder());\n  };\n\n  var date = useState(currentDateTime => Date());\n  return loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Order No: \", order._id]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\"\n              /*For Shipping Address*/\n              ,\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 37\n                }, this), order.shippingAddress.fullName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 70\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Address:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 37\n                }, this), order.shippingAddress.address, \",\", order.shippingAddress.city, \",\", order.shippingAddress.postalCode, \",\", order.shippingAddress.country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this), order.isDelivered ? /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"success\",\n                children: [\"Delivered at \", order.deliveredAt]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"danger\",\n                children: \"Not Delivered\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\"\n              /*For payment*/\n              ,\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Payment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Method:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 37\n                }, this), order.paymentMethod]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 33\n              }, this), order.isPaid ? /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"success\",\n                children: [\"Paid at \", order.paidAt]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(MessageBox, {\n                variant: \"danger\",\n                children: \"Not Paid\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-body\"\n              /*For payment*/\n              ,\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Ordered Items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: order.orderItems.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\"\n                    /*For fetching product details*/\n                    ,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: item.image,\n                        alt: item.name,\n                        className: \"small\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 141,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"min-30\"\n                      /*2nd Col for Product Name*/\n                      ,\n                      children: /*#__PURE__*/_jsxDEV(Link, {\n                        to: `/product/${item.product}`,\n                        children: item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 42\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [item.qty, \"  Pieces x \", item.price, \" Rs/Unit =  Rs. \", item.qty * item.price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 37\n                  }, this)\n                }, item.product, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 37\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Order Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Total Price of items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Rs. \", order.itemsPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Shipping Cost \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Rs. \", order.shippingPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Tax \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"Rs. \", order.taxPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Total Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"Rs. \", order.totalPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this), !order.isPaid && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: !sdkReady ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 55\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [errorPay && /*#__PURE__*/_jsxDEV(MessageBox, {\n                  variant: \"danger\",\n                  children: errorPay\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 61\n                }, this), loadingPay && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 63\n                }, this), /*#__PURE__*/_jsxDEV(PayPalButton, {\n                  amount: order.totalPrice,\n                  onSuccess: successPaymentHandler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 44\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 37\n            }, this), userInfo.isAdmin && order.isPaid && !order.isDelivered && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: deliverHandler,\n                children: \"Deliver Order\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Date of Order: \", date, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrderScreen, \"JJCcn3suM7uc5EX4uFGaXPtGDDE=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = OrderScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderScreen\");","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/screens/OrderScreen.js"],"names":["Axios","PayPalButton","React","useEffect","useState","useDispatch","useSelector","Link","detailsOrder","payOrder","LoadingBox","MessageBox","ORDER_PAY_RESET","OrderScreen","props","orderId","match","params","id","sdkReady","setSdkReady","orderPay","state","loading","loadingPay","error","errorPay","success","successPay","orderDetails","order","userSignin","userInfo","dispatch","addPayPalScript","data","get","script","document","createElement","type","src","async","onload","body","appendChild","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","deliverHandler","deliverOrder","date","currentDateTime","Date","shippingAddress","fullName","address","city","postalCode","country","isDelivered","deliveredAt","paymentMethod","paidAt","orderItems","map","item","image","name","product","qty","price","itemsPrice","toFixed","shippingPrice","taxPrice","totalPrice","isAdmin"],"mappings":"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","sourcesContent":["\r\nimport  Axios  from \"axios\";\r\nimport { PayPalButton } from 'react-paypal-button-v2';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { detailsOrder, payOrder } from \"../actions/orderActions\";\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport { ORDER_PAY_RESET } from \"../constants/orderConstants\";\r\n\r\n\r\nexport default function OrderScreen(props) { \r\n    const orderId = props.match.params.id; /*MAtching orderId and storing in orderId const*/\r\n    /*Getting status of PAYPAL SDK by REACT hooks*/\r\n    const [sdkReady, setSdkReady] = useState(false);\r\n    /*Getting OrderPay from REDUX*/\r\n    const orderPay = useSelector(state => state.orderPay);\r\n    const {\r\n        loading: loadingPay, \r\n        error: errorPay, \r\n        success: successPay} = orderPay;\r\n    \r\n    /* Now fetching orderDetails from REDUX store*/\r\n    const orderDetails = useSelector(state => state.orderDetails);\r\n    /*orderDetails contains order loading and error from REDUX store*/\r\n    const {order,loading, error} = orderDetails; \r\n\r\n\r\n    /*Importing userInfo from redux*/\r\n    const userSignin = useSelector(state => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    /*Using const orderId = props.match.params.id;*/\r\n    useEffect(() => {\r\n       const addPayPalScript = async () => {\r\n           /*It's backend request to get the client ID*/\r\n           const { data } = await Axios.get('/api/config/paypal');\r\n           const script = document.createElement('script');\r\n           script.type=\"text/javascript\";\r\n           script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\r\n           script.async=true;\r\n           script.onload = () => {\r\n               setSdkReady(true);\r\n           };\r\n           document.body.appendChild(script); \r\n       };\r\n       if(!order || successPay || (order && order._id !== orderId))  /*If Order Id is not loaded, \r\n       then load it, OR if successPay is true then refresh the page OR \r\n       order_id and OrderId does not match means, if the ID is not matched \r\n       with the URL id and customer order Id, then refresh the page and \r\n       to generate a new order id*/\r\n       {\r\n        dispatch({type: ORDER_PAY_RESET});\r\n        dispatch(detailsOrder(orderId)); /*OrderId comes from URL, so we need to define and import it*/\r\n       } else {\r\n           if(!order.isPaid) {\r\n               if(!window.paypal) {\r\n                   addPayPalScript(); /*If paypal window is not loaded, it loads it*/\r\n               } else {\r\n                   setSdkReady(true);\r\n               }\r\n           }\r\n       }\r\n       \r\n    }, [dispatch, order, orderId, sdkReady]);\r\n\r\n/*---Defining SuccessPaymentHandler----*/\r\nconst successPaymentHandler = (paymentResult) => {\r\n    dispatch(payOrder(order, paymentResult)) /*paymentResult is the result in the paypal*/\r\n\r\n}\r\n\r\n/*For DeliverHandler fx*/\r\nconst deliverHandler = () => {\r\n    dispatch(deliverOrder());\r\n}\r\n\r\n    \r\n\r\n    var date = useState(currentDateTime => Date());\r\n    \r\n    return loading? (\r\n    <LoadingBox></LoadingBox>\r\n    ) : error? (\r\n    <MessageBox variant = \"danger\">{error}</MessageBox>\r\n    ) : (\r\n        <div>\r\n           <h1>Order No: {order._id}</h1>\r\n            <div className=\"row top\">\r\n                <div className=\"col-2\">\r\n                    <ul>\r\n                        <li>\r\n                            <div className=\"card card-body\" /*For Shipping Address*/>\r\n                                <h2>Shipping</h2>\r\n                                <p>\r\n                                    <strong>Name:</strong> \r\n                                    {order.shippingAddress.fullName} <br />\r\n                                    <strong>Address:</strong>\r\n                                    {order.shippingAddress.address}, \r\n                                    {order.shippingAddress.city},\r\n                                    {order.shippingAddress.postalCode},\r\n                                    {order.shippingAddress.country}\r\n                                </p>\r\n                                {order.isDelivered \r\n                                ? ( <MessageBox variant=\"success\">Delivered at {order.deliveredAt}\r\n                                </MessageBox> \r\n                                 ) : (\r\n                                <MessageBox variant=\"danger\">Not Delivered</MessageBox>\r\n                                )}\r\n                            </div>\r\n                        </li>\r\n                        \r\n                        <li>\r\n                            <div className=\"card card-body\" /*For payment*/>\r\n                                <h2>Payment</h2>\r\n                                <p>\r\n                                    <strong>Method:</strong> \r\n                                    {order.paymentMethod}            \r\n                                </p>\r\n                                \r\n                                {order.isPaid \r\n                                ? ( <MessageBox variant=\"success\">Paid at {order.paidAt}\r\n                                </MessageBox> \r\n                                 ) : (\r\n                                <MessageBox variant=\"danger\">Not Paid</MessageBox>\r\n                                )}\r\n                            </div>\r\n                        </li>\r\n\r\n                        <li>\r\n                            <div className=\"card card-body\" /*For payment*/>\r\n                                <h2>Ordered Items</h2>\r\n                                <ul>\r\n                                    { order.orderItems.map((item) => (\r\n                                    <li key = {item.product}>\r\n                                    <div className = \"row\" /*For fetching product details*/> \r\n                                    <div /*!st Col for image*/> \r\n                                        <img src = {item.image} \r\n                                        alt = {item.name} \r\n                                        className = \"small\">                      \r\n                                        </img>\r\n                                    </div>\r\n\r\n                                    <div className = \"min-30\" /*2nd Col for Product Name*/>\r\n                                         <Link to = {`/product/${item.product}`}>\r\n                                             {item.name}</Link>\r\n                                    </div>\r\n\r\n                                    \r\n\r\n                                    <div /*4th Col showing price per unit*/>\r\n                                        {item.qty}  Pieces x {item.price} Rs/Unit =  Rs. {item.qty * item.price}\r\n                                    </div>\r\n\r\n                        \r\n                                    </div>\r\n\r\n                                    </li>\r\n                                    )\r\n                                    )}\r\n                                </ul>\r\n                                \r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className = \"col-1\">\r\n                    <div className = \"card card-body\">\r\n                        <ul>\r\n                            <li>\r\n                                <h2>Order Summary</h2>\r\n                            </li>\r\n\r\n                            <li>\r\n                                <div className=\"row\">\r\n                                    <div>Total Price of items</div>\r\n                                    <div>Rs. {order.itemsPrice.toFixed(2)}</div>\r\n                                </div>\r\n                            </li>\r\n\r\n                            <li>\r\n                                \r\n                                <div className=\"row\">\r\n                                    <div>Shipping Cost </div>\r\n                                    <div>Rs. {order.shippingPrice.toFixed(2)}</div>\r\n                                </div>\r\n                            </li>\r\n\r\n                            <li>\r\n                                <div className=\"row\">\r\n                                    <div>Tax </div>\r\n                                    <div>Rs. {order.taxPrice.toFixed(2)}</div>\r\n                                </div>\r\n                            </li>\r\n\r\n                            <li>\r\n                                <div className=\"row\">\r\n                                    <div><strong>Total Amount</strong></div>\r\n                                    <div><strong>Rs. {order.totalPrice.toFixed(2)}</strong></div>\r\n                                </div>\r\n                            </li>\r\n                            {\r\n                                !order.isPaid && (\r\n                                    <li>\r\n                                        {!sdkReady ? (<LoadingBox></LoadingBox>\r\n                                        ) : (\r\n                                            <>\r\n                                            {\r\n                                                errorPay && <MessageBox variant=\"danger\">{errorPay}</MessageBox>\r\n                                            }\r\n\r\n                                            {\r\n                                                loadingPay && <LoadingBox></LoadingBox>\r\n                                            }\r\n                                           <PayPalButton \r\n                                             amount={order.totalPrice}\r\n                                             onSuccess={successPaymentHandler}>\r\n                                            </PayPalButton>\r\n                                            </>\r\n                                        )}\r\n                                    </li>\r\n                                )\r\n                            }\r\n                            {userInfo.isAdmin && order.isPaid && !order.isDelivered && (\r\n                                <li>\r\n                                    <button type=\"button\" \r\n                                    onClick={deliverHandler} >Deliver Order</button>\r\n                                </li>\r\n                            )}\r\n                            <li>\r\n                                <p>Date of Order: {date} </p>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}