{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Axios from\"../../node_modules/axios/index\";import{detailsProduct,updateProduct}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{PRODUCT_UPDATE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductEditScreen(props){/*1st of all we need productId from the URL*/var productId=props.match.params.id;/*Defining Hooks for product fields*/var _useState=useState(' '),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(' '),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(' '),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(' '),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(' '),_useState10=_slicedToArray(_useState9,2),countInStock=_useState10[0],setCountInStock=_useState10[1];var _useState11=useState(' '),_useState12=_slicedToArray(_useState11,2),brand=_useState12[0],setBrand=_useState12[1];var _useState13=useState(' '),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];/*We need \"productDetails()\" fx from store.js and here to use its effect from the REDUCER*/var productDetails=useSelector(function(state){return state.productDetails;});/*Using following fx from the REDUCER for \"productDetails()\" >> store.js*/var product=productDetails.product,loading=productDetails.loading,error=productDetails.error;/*Importing from REDUX i.e., from APP.js, after successful updation of data into the database*/var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdated=productUpdate.success;/*Now as we need to dispatch the details product, we have to use\r\nuseEffect from the react redux*/var dispatch=useDispatch();useEffect(function(){/*After updation, user needs to be redirected to the product list*/if(!product||product._id!==productId||successUpdated)/*This means that we didn't load product from the back end. It ibstructs to load product*/ /* (product._id !== productId) >> means product exists but if the new id is not same as database product's Id.\r\n                This is done because before that when ever we click on the create new product\r\n                button, it automatically redirects us to the product edit screen instead of \r\n                product create screen.*/{dispatch({type:PRODUCT_UPDATE_RESET});dispatch(detailsProduct(productId));/*detailsProduct() fx residing in productAction.js file*/}else{/*If exists, then fill the fields accroding to the data in the backend to the UI*/setName(product.name);setPrice(product.price);setImage(product.image);setCategory(product.category);setCountInStock(product.countInStock);setBrand(product.brand);setDescription(product.description);}},[dispatch,productId,product,successUpdated]);/*Defining fx {submitHandler}*/var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProduct({/*This is a fx, we need to implement it in Actions folder >> ProductActions.js*/_id:productId,name:name,price:price,image:image,category:category,brand:brand,countInStock:countInStock,description:description}));};var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loadingUpload=_useState16[0],setLoadingUpload=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),errorUpload=_useState18[0],setErrorUpload=_useState18[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var uploadFileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,bodyFormData,_yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/*sedning ajax req to backend for uploading*/file=e.target.files[0];/*[0] means upload only first selected file*/bodyFormData=new FormData();/*FormData class is req to upload files by ajax req*/bodyFormData.append('image',file);setLoadingUpload(true);_context.prev=4;_context.next=7;return Axios.post('/api/uploads',bodyFormData,{headers:{'Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(userInfo.token)}});case 7:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;setImage(data);setLoadingUpload(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);setErrorUpload(_context.t0.message);setLoadingUpload(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function uploadFileHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"PRODUCT EDIT SECTION\"})}),successUpdated&&props.history.push('/productlist'),loadingUpdate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpdate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",placeholder:\"Enter product name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{id:\"price\",type:\"price\",placeholder:\"Enter price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image\",type:\"text\",placeholder:\"New Image\",value:image,onChange:function onChange(e){return setImage(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile\",children:\"Image File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile\",label:\"Choose Image\",onChange:uploadFileHandler}),loadingUpload&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpload&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpload})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{id:\"category\",type:\"text\",placeholder:\"Enter product category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{id:\"brand\",type:\"text\",placeholder:\"Enter product brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStock\",children:\"No of stocks\"}),/*#__PURE__*/_jsx(\"input\",{id:\"countInStock\",type:\"text\",placeholder:\"Enter product stock number\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Name\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",type:\"text\",rows:\"3\",placeholder:\"Enter product description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"primary\",type:\"submit\",children:\"Update Details\"})]})]})]})});}","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/screens/ProductEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Axios","detailsProduct","updateProduct","LoadingBox","MessageBox","PRODUCT_UPDATE_RESET","ProductEditScreen","props","productId","match","params","id","name","setName","price","setPrice","image","setImage","category","setCategory","countInStock","setCountInStock","brand","setBrand","description","setDescription","productDetails","state","product","loading","error","productUpdate","loadingUpdate","errorUpdate","successUpdated","success","dispatch","_id","type","submitHandler","e","preventDefault","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","Authorization","token","data","message","history","push","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport  Axios  from \"../../node_modules/axios/index\";\r\nimport { detailsProduct, updateProduct } from \"../actions/productActions\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { PRODUCT_UPDATE_RESET } from \"../constants/productConstants\";\r\n\r\nexport default function ProductEditScreen(props) {\r\n/*1st of all we need productId from the URL*/\r\nconst productId = props.match.params.id;\r\n/*Defining Hooks for product fields*/\r\nconst [name, setName] = useState(' ');\r\nconst [price, setPrice] = useState(' ');\r\nconst [image, setImage] = useState(' ');\r\nconst [category, setCategory] = useState(' ');\r\nconst [countInStock, setCountInStock] = useState(' ');\r\nconst [brand, setBrand] = useState(' ');\r\nconst [description, setDescription] = useState(' ');\r\n/*We need \"productDetails()\" fx from store.js and here to use its effect from the REDUCER*/\r\nconst productDetails = useSelector(state => state.productDetails);\r\n/*Using following fx from the REDUCER for \"productDetails()\" >> store.js*/\r\nconst { product, loading, error } = productDetails;\r\n\r\n\r\n/*Importing from REDUX i.e., from APP.js, after successful updation of data into the database*/\r\nconst productUpdate = useSelector(state => state.productUpdate);\r\nconst { loading: loadingUpdate, error: errorUpdate, success: successUpdated} = productUpdate;\r\n\r\n\r\n/*Now as we need to dispatch the details product, we have to use\r\nuseEffect from the react redux*/\r\nconst dispatch = useDispatch();\r\nuseEffect(() => {\r\n    /*After updation, user needs to be redirected to the product list*/\r\n    if(!product || product._id !== productId || successUpdated ) /*This means that we didn't load product from the back end. It ibstructs to load product*/\r\n                /* (product._id !== productId) >> means product exists but if the new id is not same as database product's Id.\r\n                This is done because before that when ever we click on the create new product\r\n                button, it automatically redirects us to the product edit screen instead of \r\n                product create screen.*/\r\n    {\r\n        dispatch({ type: PRODUCT_UPDATE_RESET});\r\n        dispatch(detailsProduct(productId)); /*detailsProduct() fx residing in productAction.js file*/\r\n        \r\n    } else { /*If exists, then fill the fields accroding to the data in the backend to the UI*/\r\n        setName(product.name);\r\n        setPrice(product.price);\r\n        setImage(product.image);\r\n        setCategory(product.category);\r\n        setCountInStock(product.countInStock);\r\n        setBrand(product.brand);\r\n        setDescription(product.description);\r\n    }\r\n    \r\n    \r\n}, [dispatch, productId, product, successUpdated]);\r\n\r\n/*Defining fx {submitHandler}*/\r\n    const submitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(\r\n        updateProduct({  /*This is a fx, we need to implement it in Actions folder >> ProductActions.js*/\r\n            _id: productId,\r\n            name,\r\n            price,\r\n            image,\r\n            category,\r\n            brand,\r\n            countInStock,\r\n            description,\r\n        })\r\n    );\r\n};\r\n\r\n    const [loadingUpload, setLoadingUpload] = useState(false);\r\n    const [errorUpload, setErrorUpload] = useState();\r\n    const userSignin = useSelector(state => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n    const uploadFileHandler = async(e) => { /*sedning ajax req to backend for uploading*/\r\n       const file = e.target.files[0]; /*[0] means upload only first selected file*/\r\n       const bodyFormData = new FormData(); /*FormData class is req to upload files by ajax req*/\r\n       bodyFormData.append('image', file);\r\n       setLoadingUpload(true);\r\n       try{\r\n        const { data} = await Axios.post('/api/uploads', bodyFormData, {\r\n            headers: {'Content-Type':'multipart/form-data', \r\n            Authorization: `Bearer ${userInfo.token}`},\r\n         });\r\n         setImage(data);\r\n         setLoadingUpload(false);\r\n       } catch (error) {\r\n           setErrorUpload(error.message);\r\n           setLoadingUpload(false);\r\n       }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className = \"form\" onSubmit = {submitHandler}>\r\n                <div>\r\n                    <h1>PRODUCT EDIT SECTION</h1>\r\n                </div>\r\n                { successUpdated && props.history.push('/productlist')}\r\n                {loadingUpdate && <LoadingBox></LoadingBox>}\r\n                 {errorUpdate && <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>}\r\n\r\n                {loading ? <LoadingBox></LoadingBox> \r\n                : error ? <MessageBox variant = \"danger\">{error}</MessageBox>\r\n                : \r\n                <>\r\n                <div /*Editing for name field*/>\r\n                    <label htmlFor=\"name\">Name</label>\r\n                    <input id=\"name\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product name\" \r\n                    value = {name} \r\n                    onChange = {(e) => setName(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for name price*/>\r\n                    <label htmlFor=\"price\">Price</label>\r\n                    <input id=\"price\" \r\n                    type = \"price\" \r\n                    placeholder = \"Enter price\" \r\n                    value = {price} \r\n                    onChange = {(e) => setPrice(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for Image*/>\r\n                    <label htmlFor=\"image\">Name</label>\r\n                    <input id=\"image\" \r\n                    type = \"text\" \r\n                    placeholder = \"New Image\" \r\n                    value = {image} \r\n                    onChange = {(e) => setImage(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"imageFile\">Image File</label>\r\n                    <input type=\"file\" id=\"imageFile\" label=\"Choose Image\"\r\n                    onChange={uploadFileHandler}></input>\r\n                    {loadingUpload && <LoadingBox></LoadingBox>}\r\n                    {errorUpload && <MessageBox variant=\"danger\">{errorUpload}</MessageBox>}\r\n                </div>\r\n\r\n                <div /*Editing for category field*/>\r\n                    <label htmlFor=\"category\">Category</label>\r\n                    <input id=\"category\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product category\" \r\n                    value = {category} \r\n                    onChange = {(e) => setCategory(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for brand field*/>\r\n                    <label htmlFor=\"brand\">Brand</label>\r\n                    <input id=\"brand\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product brand\" \r\n                    value = {brand} \r\n                    onChange = {(e) => setBrand(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for countInStock field*/>\r\n                    <label htmlFor=\"countInStock\">No of stocks</label>\r\n                    <input id=\"countInStock\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product stock number\" \r\n                    value = {countInStock} \r\n                    onChange = {(e) => setCountInStock(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for description field*/>\r\n                    <label htmlFor=\"description\">Name</label>\r\n                    <textarea id=\"description\" \r\n                    type = \"text\" \r\n                    rows = \"3\"\r\n                    placeholder = \"Enter product description\" \r\n                    value = {description} \r\n                    onChange = {(e) => setDescription(e.target.value)}>\r\n                    </textarea>\r\n                </div>\r\n\r\n                <div>\r\n                    <label/>\r\n                    <button className=\"primary\" type = \"submit\">Update Details</button>\r\n                </div>\r\n\r\n                </>\r\n                }\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}