{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/USER/Desktop/Programming/Saree/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import{CART_EMPTY}from\"../constants/cartConstants\";import{ORDER_CREATE_REQUEST,ORDER_CREATE_FAIL,ORDER_CREATE_SUCCESS,ORDER_DETAILS_REQUEST,ORDER_DETAILS_FAIL,ORDER_DETAILS_SUCCESS,ORDER_PAY_REQUEST,ORDER_PAY_FAIL,ORDER_PAY_SUCCESS,ORDER_MINE_LIST_REQUEST,ORDER_MINE_LIST_FAIL,ORDER_MINE_LIST_SUCCESS,ORDER_LIST_REQUEST,ORDER_LIST_FAIL,ORDER_LIST_SUCCESS,ORDER_DELETE_REQUEST,ORDER_DELETE_FAIL,ORDER_DELETE_SUCCESS,ORDER_DELIVER_REQUEST,ORDER_DELIVER_SUCCESS,ORDER_DELIVER_FAIL,ORDER_SUMMARY_FAIL,ORDER_SUMMARY_SUCCESS,ORDER_SUMMARY_REQUEST}from'../constants/orderConstants';export var createOrder=function createOrder(order){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:ORDER_CREATE_REQUEST,payload:order});_context.prev=1;/*Importing userInfo from userSignIn*/_getState=getState(),userInfo=_getState.userSignin.userInfo;/*AJAX Request*/_context.next=5;return Axios.post('api/orders',order,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});dispatch({type:CART_EMPTY});localStorage.removeItem('cartItems');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch({type:ORDER_CREATE_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};/*Defining detailsOrder from the orderScreen --> useEffect*/export var detailsOrder=function detailsOrder(orderId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,userInfo,_yield$Axios$get,data,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:ORDER_DETAILS_REQUEST,payload:orderId});/*Geeting functional of getState and importing userInfo data*/_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context2.prev=2;_context2.next=5;return Axios.get(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get=_context2.sent;data=_yield$Axios$get.data;/*userInfo is obtained from getState*/dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);message=_context2.t0.message&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message;dispatch({type:ORDER_DETAILS_FAIL,payload:message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};/*For defining successfullPaymentHandler in the ORderScreen*/export var payOrder=function payOrder(order,paymentResult){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState3,userInfo,_Axios$put,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:ORDER_PAY_REQUEST,payload:{order:order,paymentResult:paymentResult}});_getState3=getState(),userInfo=_getState3.userSignin.userInfo;/*AJAX request*/try{/*Calling pay API and its type is PUT for payment order details in Paypal*/_Axios$put=Axios.put(\"/api/orders/\".concat(order._id,\"/pay\"),paymentResult,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}}),data=_Axios$put.data;dispatch({type:ORDER_PAY_SUCCESS,payload:data});}catch(error){message=error.message&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_PAY_FAIL,payload:message});}case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var listOrderMine=function listOrderMine(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState4,userInfo,_yield$Axios$get2,data,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:ORDER_MINE_LIST_REQUEST});_getState4=getState(),userInfo=_getState4.userSignin.userInfo;_context4.prev=2;_context4.next=5;return Axios.get('/api/orders/mine',{/*Authorizzation for getting TOKEN*/headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get2=_context4.sent;data=_yield$Axios$get2.data;dispatch({type:ORDER_MINE_LIST_SUCCESS,payload:data});_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);message=_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message;dispatch({type:ORDER_MINE_LIST_FAIL,payload:message});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};/*For viewing order history by admins. \"listOrders\" is a fx in OrderListScreen.js*/export var listOrders=function listOrders(_ref5){var _ref5$seller=_ref5.seller,seller=_ref5$seller===void 0?' ':_ref5$seller;return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState5,userInfo,_yield$Axios$get3,data,message;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:ORDER_LIST_REQUEST});_getState5=getState(),userInfo=_getState5.userSignin.userInfo;_context5.prev=2;_context5.next=5;return Axios.get(\"/api/orders?seller=\".concat(seller),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get3=_context5.sent;data=_yield$Axios$get3.data;dispatch({type:ORDER_LIST_SUCCESS,payload:data});_context5.next=14;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](2);message=_context5.t0.message&&_context5.t0.response.data.message?_context5.t0.response.data.message:_context5.t0.message;dispatch({type:ORDER_LIST_FAIL,payload:message});case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[2,10]]);}));return function(_x9,_x10){return _ref6.apply(this,arguments);};}();};/*For deleting orders by ADMIN. \"deleteOrder\" fx from OrderListScreen.js is defining here*/export var deleteOrder=function deleteOrder(orderId){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState6,userInfo,_yield$Axios$delete,data,message;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:ORDER_DELETE_REQUEST,payload:orderId});_getState6=getState(),userInfo=_getState6.userSignin.userInfo;_context6.prev=2;_context6.next=5;return Axios.delete(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$delete=_context6.sent;data=_yield$Axios$delete.data;dispatch({type:ORDER_DELETE_SUCCESS,payload:data});_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);message=_context6.t0.message&&_context6.t0.response.data.message?_context6.t0.response.data.message:_context6.t0.message;dispatch({type:ORDER_DELETE_FAIL,payload:message});case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);}));return function(_x11,_x12){return _ref7.apply(this,arguments);};}();};/*For defining deliverOrderHandler in orderScrren.js*/export var deliverOrder=function deliverOrder(orderId){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _getState7,userInfo,_Axios$put2,data,message;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:ORDER_DELIVER_REQUEST,payload:orderId});_getState7=getState(),userInfo=_getState7.userSignin.userInfo;/*AJAX request*/try{/*Calling pay API and its type is PUT for payment order details in Paypal*/_Axios$put2=Axios.put(\"/api/orders/\".concat(orderId,\"/deliver\"),{},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}}),data=_Axios$put2.data;dispatch({type:ORDER_DELIVER_SUCCESS,payload:data});}catch(error){message=error.message&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_DELIVER_FAIL,payload:message});}case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x13,_x14){return _ref8.apply(this,arguments);};}();};/*Order Summary from the DashboardScreen.js*/export var summaryOrder=function summaryOrder(){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch,getState){var _getState8,userInfo,_yield$Axios$get4,data,message;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dispatch({type:ORDER_SUMMARY_REQUEST});_getState8=getState(),userInfo=_getState8.userSignin.userInfo;_context8.prev=2;_context8.next=5;return Axios.get('/api/orders/summary',{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$Axios$get4=_context8.sent;data=_yield$Axios$get4.data;dispatch({type:ORDER_SUMMARY_SUCCESS,payload:data});_context8.next=14;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](2);message=_context8.t0.message&&_context8.t0.response.data.message?_context8.t0.response.data.message:_context8.t0.message;dispatch({type:ORDER_SUMMARY_FAIL,payload:message});case 14:case\"end\":return _context8.stop();}}},_callee8,null,[[2,10]]);}));return function(_x15,_x16){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/actions/orderActions.js"],"names":["Axios","CART_EMPTY","ORDER_CREATE_REQUEST","ORDER_CREATE_FAIL","ORDER_CREATE_SUCCESS","ORDER_DETAILS_REQUEST","ORDER_DETAILS_FAIL","ORDER_DETAILS_SUCCESS","ORDER_PAY_REQUEST","ORDER_PAY_FAIL","ORDER_PAY_SUCCESS","ORDER_MINE_LIST_REQUEST","ORDER_MINE_LIST_FAIL","ORDER_MINE_LIST_SUCCESS","ORDER_LIST_REQUEST","ORDER_LIST_FAIL","ORDER_LIST_SUCCESS","ORDER_DELETE_REQUEST","ORDER_DELETE_FAIL","ORDER_DELETE_SUCCESS","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAIL","ORDER_SUMMARY_FAIL","ORDER_SUMMARY_SUCCESS","ORDER_SUMMARY_REQUEST","createOrder","order","dispatch","getState","type","payload","userInfo","userSignin","post","headers","Authorization","token","data","localStorage","removeItem","response","message","detailsOrder","orderId","get","payOrder","paymentResult","put","_id","error","listOrderMine","listOrders","seller","deleteOrder","delete","deliverOrder","summaryOrder"],"mappings":"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","sourcesContent":["import  Axios  from \"axios\";\r\nimport { CART_EMPTY } from \"../constants/cartConstants\";\r\nimport { ORDER_CREATE_REQUEST, \r\n    ORDER_CREATE_FAIL, \r\n    ORDER_CREATE_SUCCESS,\r\n    ORDER_DETAILS_REQUEST,\r\n    ORDER_DETAILS_FAIL,\r\n    ORDER_DETAILS_SUCCESS,\r\n    ORDER_PAY_REQUEST,\r\n    ORDER_PAY_FAIL,\r\n    ORDER_PAY_SUCCESS,\r\n    ORDER_MINE_LIST_REQUEST,\r\n    ORDER_MINE_LIST_FAIL,\r\n    ORDER_MINE_LIST_SUCCESS,\r\n    ORDER_LIST_REQUEST,\r\n    ORDER_LIST_FAIL,\r\n    ORDER_LIST_SUCCESS,\r\n    ORDER_DELETE_REQUEST,\r\n    ORDER_DELETE_FAIL,\r\n    ORDER_DELETE_SUCCESS,\r\n    ORDER_DELIVER_REQUEST,\r\n    ORDER_DELIVER_SUCCESS,\r\n    ORDER_DELIVER_FAIL,\r\n    ORDER_SUMMARY_FAIL,\r\n    ORDER_SUMMARY_SUCCESS,\r\n    ORDER_SUMMARY_REQUEST} from '../constants/orderConstants';\r\n\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n    dispatch({type: ORDER_CREATE_REQUEST, payload: order});\r\n    try{\r\n        /*Importing userInfo from userSignIn*/\r\n        const {userSignin: { userInfo }} = getState();\r\n        /*AJAX Request*/\r\n        const { data } = await Axios.post('api/orders', order, {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: ORDER_CREATE_SUCCESS, payload: data.order});\r\n        dispatch({type: CART_EMPTY});\r\n        localStorage.removeItem('cartItems');\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type: ORDER_CREATE_FAIL,\r\n            payload:\r\n                error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message,\r\n    });\r\n  }\r\n};\r\n\r\n/*Defining detailsOrder from the orderScreen --> useEffect*/\r\n\r\nexport const detailsOrder = (orderId) => async(dispatch, getState) => {\r\n    dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\r\n    \r\n    /*Geeting functional of getState and importing userInfo data*/\r\n    const {userSignin : {userInfo}} = getState();\r\n    \r\n    try{ /*AJAX request*/\r\n        const { data } = await Axios.get(`/api/orders/${orderId}`, {\r\n            headers: { Authorization: `Bearer ${userInfo.token}`}\r\n        });                                    /*userInfo is obtained from getState*/\r\n        dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data});\r\n    } catch (error) {\r\n        const message = error.message && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n        dispatch({ type: ORDER_DETAILS_FAIL, payload: message});\r\n    }\r\n};\r\n\r\n\r\n/*For defining successfullPaymentHandler in the ORderScreen*/\r\nexport const payOrder = (order, paymentResult) => async(dispatch, getState) => {\r\n    dispatch ({type: ORDER_PAY_REQUEST, payload: {order, paymentResult } });\r\n    const {userSignin : {userInfo}} = getState();\r\n\r\n        /*AJAX request*/\r\n        try{ /*Calling pay API and its type is PUT for payment order details in Paypal*/\r\n            const { data } = Axios.put(`/api/orders/${order._id}/pay`, paymentResult, {           \r\n            headers: { Authorization: `Bearer ${userInfo.token}`},\r\n        });\r\n         dispatch({type: ORDER_PAY_SUCCESS, payload: data});\r\n        } catch (error) {\r\n            const message = error.message && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message;\r\n            dispatch({ type: ORDER_PAY_FAIL, payload: message});\r\n        }\r\n    } \r\n\r\nexport const listOrderMine = () => async(dispatch, getState) => {\r\n    dispatch({type: ORDER_MINE_LIST_REQUEST});\r\n    const { userSignin: {userInfo}} = getState();\r\n    try{\r\n        /*AJAX REQUEST*/\r\n        const { data} = await Axios.get('/api/orders/mine', {\r\n            /*Authorizzation for getting TOKEN*/\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: ORDER_MINE_LIST_SUCCESS, payload: data});\r\n    } catch (error) {\r\n        const message = \r\n        error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n        dispatch({type: ORDER_MINE_LIST_FAIL, payload: message});\r\n\r\n    }\r\n};\r\n\r\n/*For viewing order history by admins. \"listOrders\" is a fx in OrderListScreen.js*/\r\nexport const listOrders = ( { seller = ' '}) => async(dispatch, getState) => {\r\n    dispatch({ type: ORDER_LIST_REQUEST});\r\n    const {userSignin: {userInfo}} = getState();\r\n    try{\r\n        const { data } = await Axios.get(`/api/orders?seller=${seller}`, {\r\n            headers: {Authorization: `Bearer ${userInfo.token}`}\r\n        });\r\n        dispatch({ type: ORDER_LIST_SUCCESS, payload: data});\r\n    } catch (error) {\r\n        const message = error.message && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message;\r\n        dispatch({ type: ORDER_LIST_FAIL, payload: message});\r\n    }\r\n};\r\n\r\n/*For deleting orders by ADMIN. \"deleteOrder\" fx from OrderListScreen.js is defining here*/\r\nexport const deleteOrder = (orderId) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_DELETE_REQUEST, payload: orderId});\r\n    const {userSignin:{userInfo}} = getState();\r\n    try{\r\n        const { data } = await Axios.delete(`/api/orders/${orderId}`, {\r\n            headers: { Authorization: `Bearer ${userInfo.token}`},\r\n        });\r\n        dispatch({ type: ORDER_DELETE_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.message && error.response.data.message\r\n        ? error.response.data.message \r\n        : error.message;\r\n        dispatch({ type: ORDER_DELETE_FAIL, payload: message});\r\n    }\r\n};\r\n\r\n/*For defining deliverOrderHandler in orderScrren.js*/\r\nexport const deliverOrder = (orderId) => async(dispatch, getState) => {\r\n    dispatch ({type: ORDER_DELIVER_REQUEST, payload: orderId });\r\n    const {userSignin : {userInfo}} = getState();\r\n\r\n        /*AJAX request*/\r\n        try{ /*Calling pay API and its type is PUT for payment order details in Paypal*/\r\n            const { data } = Axios.put(`/api/orders/${orderId}/deliver`, {}, {           \r\n            headers: { Authorization: `Bearer ${userInfo.token}`},\r\n        });\r\n         dispatch({type: ORDER_DELIVER_SUCCESS, payload: data});\r\n        } catch (error) {\r\n            const message = error.message && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message;\r\n            dispatch({ type: ORDER_DELIVER_FAIL, payload: message});\r\n        }\r\n    } \r\n\r\n    /*Order Summary from the DashboardScreen.js*/\r\nexport const summaryOrder = () => async(dispatch, getState) => {\r\n    dispatch ({type: ORDER_SUMMARY_REQUEST });\r\n    const { userSignin : {userInfo} } = getState();\r\n\r\n    try{\r\n        const {data} = await Axios.get('/api/orders/summary', {\r\n            headers: { Authorization: `Bearer ${userInfo.token}`},\r\n        });\r\n        dispatch({ type: ORDER_SUMMARY_SUCCESS, payload: data});\r\n    } catch (error) {\r\n        const message = error.message && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message;\r\n            dispatch({ type: ORDER_SUMMARY_FAIL, payload: message});\r\n    }\r\n\r\n} "]},"metadata":{},"sourceType":"module"}