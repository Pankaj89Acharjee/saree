{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\Programming\\\\Saree\\\\frontend\\\\src\\\\screens\\\\ProductEditScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Axios } from \"../../node_modules/axios/index\";\nimport { detailsProduct, updateProduct } from \"../actions/productActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { PRODUCT_UPDATE_RESET } from \"../constants/productConstants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProductEditScreen(props) {\n  _s();\n\n  /*1st of all we need productId from the URL*/\n  const productId = props.match.params.id;\n  /*Defining Hooks for product fields*/\n\n  const [name, setName] = useState(' ');\n  const [price, setPrice] = useState(' ');\n  const [image, setImage] = useState(' ');\n  const [category, setCategory] = useState(' ');\n  const [countInStock, setCountInStock] = useState(' ');\n  const [brand, setBrand] = useState(' ');\n  const [description, setDescription] = useState(' ');\n  /*We need \"productDetails()\" fx from store.js and here to use its effect from the REDUCER*/\n\n  const productDetails = useSelector(state => state.productDetails);\n  /*Using following fx from the REDUCER for \"productDetails()\" >> store.js*/\n\n  const {\n    product,\n    loading,\n    error\n  } = productDetails;\n  /*Importing from REDUX i.e., from APP.js, after successful updation of data into the database*/\n\n  const productUpdate = useSelector(state => state.productUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdated\n  } = productUpdate;\n  /*Now as we need to dispatch the details product, we have to use\r\n  useEffect from the react redux*/\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    /*After updation, user needs to be redirected to the product list*/\n    if (!product || product._id !== productId || successUpdated)\n      /*This means that we didn't load product from the back end. It ibstructs to load product*/\n\n      /* (product._id !== productId) >> means product exists but if the new id is not same as database product's Id.\r\n      This is done because before that when ever we click on the create new product\r\n      button, it automatically redirects us to the product edit screen instead of \r\n      product create screen.*/\n      {\n        dispatch({\n          type: PRODUCT_UPDATE_RESET\n        });\n        dispatch(detailsProduct(productId));\n        /*detailsProduct() fx residing in productAction.js file*/\n      } else {\n      /*If exists, then fill the fields accroding to the data in the backend to the UI*/\n      setName(product.name);\n      setPrice(product.price);\n      setImage(product.image);\n      setCategory(product.category);\n      setCountInStock(product.countInStock);\n      setBrand(product.brand);\n      setDescription(product.description);\n    }\n  }, [dispatch, productId, product]);\n  /*Defining fx {submitHandler}*/\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(updateProduct({\n      /*This is a fx, we need to implement it in Actions folder >> ProductActions.js*/\n      _id: productId,\n      name,\n      price,\n      image,\n      category,\n      brand,\n      countInStock,\n      description\n    }));\n  };\n\n  const [loadingUpload, setLoadingUpload] = useState(false);\n  const [errorUpload, setErrorUpload] = useState();\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n\n  const uploadFileHandler = async e => {\n    /*sedning ajax req to backend for uploading*/\n    const file = e.target.files[0];\n    /*[0] means upload only first selected file*/\n\n    const bodyFormData = new FormData();\n    /*FormData class is req to upload files by ajax req*/\n\n    bodyFormData.append('image', file);\n    setLoadingUpload(true);\n\n    try {\n      const {\n        data\n      } = await Axios('/api/uploads', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${userInfo.token}`\n        }\n      });\n    } catch (error) {\n      setErrorUpload(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"PRODUCT EDIT SECTION\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), successUpdated && props.history.push('/productlist'), loadingUpdate && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 35\n      }, this), errorUpdate && /*#__PURE__*/_jsxDEV(MessageBox, {\n        variant: \"danger\",\n        children: errorUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 34\n      }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 28\n      }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 27\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"name\",\n            type: \"text\",\n            placeholder: \"Enter product name\",\n            value: name,\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"price\",\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"price\",\n            type: \"price\",\n            placeholder: \"Enter price\",\n            value: price,\n            onChange: e => setPrice(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"image\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"image\",\n            type: \"text\",\n            placeholder: \"New Image\",\n            value: image,\n            onChange: e => setImage(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"imageFile\",\n            children: \"Image File\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"imageFile\",\n            label: \"Choose Image\",\n            onChange: uploadFileHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), loadingUpload && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 39\n          }, this), errorUpload && /*#__PURE__*/_jsxDEV(MessageBox, {\n            variant: \"danger\",\n            children: errorUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\",\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"category\",\n            type: \"text\",\n            placeholder: \"Enter product category\",\n            value: category,\n            onChange: e => setCategory(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"brand\",\n            children: \"Brand\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"brand\",\n            type: \"text\",\n            placeholder: \"Enter product brand\",\n            value: brand,\n            onChange: e => setBrand(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"countInStock\",\n            children: \"No of stocks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"countInStock\",\n            type: \"text\",\n            placeholder: \"Enter product stock number\",\n            value: countInStock,\n            onChange: e => setCountInStock(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"description\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"description\",\n            type: \"text\",\n            rows: \"3\",\n            placeholder: \"Enter product description\",\n            value: description,\n            onChange: e => setDescription(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary\",\n            type: \"submit\",\n            children: \"Update Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProductEditScreen, \"S0sJMFLmZXwis2LP4/0Kgk9hYco=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useSelector];\n});\n\n_c = ProductEditScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductEditScreen\");","map":{"version":3,"sources":["C:/Users/USER/Desktop/Programming/Saree/frontend/src/screens/ProductEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Axios","detailsProduct","updateProduct","LoadingBox","MessageBox","PRODUCT_UPDATE_RESET","ProductEditScreen","props","productId","match","params","id","name","setName","price","setPrice","image","setImage","category","setCategory","countInStock","setCountInStock","brand","setBrand","description","setDescription","productDetails","state","product","loading","error","productUpdate","loadingUpdate","errorUpdate","success","successUpdated","dispatch","_id","type","submitHandler","e","preventDefault","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","file","target","files","bodyFormData","FormData","append","data","headers","Authorization","token","message","history","push","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Axios } from \"../../node_modules/axios/index\";\r\nimport { detailsProduct, updateProduct } from \"../actions/productActions\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { PRODUCT_UPDATE_RESET } from \"../constants/productConstants\";\r\n\r\nexport default function ProductEditScreen(props) {\r\n/*1st of all we need productId from the URL*/\r\nconst productId = props.match.params.id;\r\n/*Defining Hooks for product fields*/\r\nconst [name, setName] = useState(' ');\r\nconst [price, setPrice] = useState(' ');\r\nconst [image, setImage] = useState(' ');\r\nconst [category, setCategory] = useState(' ');\r\nconst [countInStock, setCountInStock] = useState(' ');\r\nconst [brand, setBrand] = useState(' ');\r\nconst [description, setDescription] = useState(' ');\r\n/*We need \"productDetails()\" fx from store.js and here to use its effect from the REDUCER*/\r\nconst productDetails = useSelector(state => state.productDetails);\r\n/*Using following fx from the REDUCER for \"productDetails()\" >> store.js*/\r\nconst { product, loading, error } = productDetails;\r\n\r\n\r\n/*Importing from REDUX i.e., from APP.js, after successful updation of data into the database*/\r\nconst productUpdate = useSelector(state => state.productUpdate);\r\nconst { loading: loadingUpdate, error: errorUpdate, success: successUpdated} = productUpdate;\r\n\r\n\r\n/*Now as we need to dispatch the details product, we have to use\r\nuseEffect from the react redux*/\r\nconst dispatch = useDispatch();\r\nuseEffect(() => {\r\n    /*After updation, user needs to be redirected to the product list*/\r\n    if(!product || product._id !== productId || successUpdated ) /*This means that we didn't load product from the back end. It ibstructs to load product*/\r\n                /* (product._id !== productId) >> means product exists but if the new id is not same as database product's Id.\r\n                This is done because before that when ever we click on the create new product\r\n                button, it automatically redirects us to the product edit screen instead of \r\n                product create screen.*/\r\n    {\r\n        dispatch({ type: PRODUCT_UPDATE_RESET});\r\n        dispatch(detailsProduct(productId)); /*detailsProduct() fx residing in productAction.js file*/\r\n        \r\n    } else { /*If exists, then fill the fields accroding to the data in the backend to the UI*/\r\n        setName(product.name);\r\n        setPrice(product.price);\r\n        setImage(product.image);\r\n        setCategory(product.category);\r\n        setCountInStock(product.countInStock);\r\n        setBrand(product.brand);\r\n        setDescription(product.description);\r\n    }\r\n    \r\n    \r\n}, [dispatch, productId, product]);\r\n\r\n/*Defining fx {submitHandler}*/\r\n    const submitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(\r\n        updateProduct({  /*This is a fx, we need to implement it in Actions folder >> ProductActions.js*/\r\n            _id: productId,\r\n            name,\r\n            price,\r\n            image,\r\n            category,\r\n            brand,\r\n            countInStock,\r\n            description,\r\n        })\r\n    );\r\n};\r\n\r\n    const [loadingUpload, setLoadingUpload] = useState(false);\r\n    const [errorUpload, setErrorUpload] = useState();\r\n    const userSignin = useSelector(state => state.userSignin);\r\n    const { userInfo } = userSignin;\r\n    const uploadFileHandler = async(e) => { /*sedning ajax req to backend for uploading*/\r\n       const file = e.target.files[0]; /*[0] means upload only first selected file*/\r\n       const bodyFormData = new FormData(); /*FormData class is req to upload files by ajax req*/\r\n       bodyFormData.append('image', file);\r\n       setLoadingUpload(true);\r\n       try{\r\n        const { data} = await Axios('/api/uploads', bodyFormData, {\r\n            headers: {'Content-Type':'multipart/form-data', \r\n            Authorization: `Bearer ${userInfo.token}`},\r\n         } )\r\n       } catch (error) {\r\n           setErrorUpload(error.message);\r\n       }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form className = \"form\" onSubmit = {submitHandler}>\r\n                <div>\r\n                    <h1>PRODUCT EDIT SECTION</h1>\r\n                </div>\r\n                { successUpdated && props.history.push('/productlist')}\r\n                {loadingUpdate && <LoadingBox></LoadingBox>}\r\n                 {errorUpdate && <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>}\r\n\r\n                {loading ? <LoadingBox></LoadingBox> \r\n                : error ? <MessageBox variant = \"danger\">{error}</MessageBox>\r\n                : \r\n                <>\r\n                <div /*Editing for name field*/>\r\n                    <label htmlFor=\"name\">Name</label>\r\n                    <input id=\"name\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product name\" \r\n                    value = {name} \r\n                    onChange = {(e) => setName(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for name price*/>\r\n                    <label htmlFor=\"price\">Price</label>\r\n                    <input id=\"price\" \r\n                    type = \"price\" \r\n                    placeholder = \"Enter price\" \r\n                    value = {price} \r\n                    onChange = {(e) => setPrice(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for Image*/>\r\n                    <label htmlFor=\"image\">Name</label>\r\n                    <input id=\"image\" \r\n                    type = \"text\" \r\n                    placeholder = \"New Image\" \r\n                    value = {image} \r\n                    onChange = {(e) => setImage(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n                <div>\r\n                    <label htmlFor=\"imageFile\">Image File</label>\r\n                    <input type=\"file\" id=\"imageFile\" label=\"Choose Image\"\r\n                    onChange={uploadFileHandler}></input>\r\n                    {loadingUpload && <LoadingBox></LoadingBox>}\r\n                    {errorUpload && <MessageBox variant=\"danger\">{errorUpload}</MessageBox>}\r\n                </div>\r\n\r\n                <div /*Editing for category field*/>\r\n                    <label htmlFor=\"category\">Category</label>\r\n                    <input id=\"category\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product category\" \r\n                    value = {category} \r\n                    onChange = {(e) => setCategory(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for brand field*/>\r\n                    <label htmlFor=\"brand\">Brand</label>\r\n                    <input id=\"brand\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product brand\" \r\n                    value = {brand} \r\n                    onChange = {(e) => setBrand(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for countInStock field*/>\r\n                    <label htmlFor=\"countInStock\">No of stocks</label>\r\n                    <input id=\"countInStock\" \r\n                    type = \"text\" \r\n                    placeholder = \"Enter product stock number\" \r\n                    value = {countInStock} \r\n                    onChange = {(e) => setCountInStock(e.target.value)}>\r\n                    </input>\r\n                </div>\r\n\r\n                <div /*Editing for description field*/>\r\n                    <label htmlFor=\"description\">Name</label>\r\n                    <textarea id=\"description\" \r\n                    type = \"text\" \r\n                    rows = \"3\"\r\n                    placeholder = \"Enter product description\" \r\n                    value = {description} \r\n                    onChange = {(e) => setDescription(e.target.value)}>\r\n                    </textarea>\r\n                </div>\r\n\r\n                <div>\r\n                    <label/>\r\n                    <button className=\"primary\" type = \"submit\">Update Details</button>\r\n                </div>\r\n\r\n                </>\r\n                }\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}